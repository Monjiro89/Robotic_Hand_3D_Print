#include <Servo.h>

Servo indice;       // Servo dedo índice
Servo medio;        // Servo dedo medio
Servo anular;       // Servo anular + meñique
Servo pulgarFlex;   // Servo flexión del pulgar
Servo pulgarGiro;   // Micro-servo giro horizontal del pulgar

int pinPulgarFlex = 9;
int pinPulgarGiro = 12; 
int pinIndice = 3;
int pinMedio = 5;  
int pinAnular = 6;


void setup() {
  Serial.begin(9600);

  indice.attach(pinIndice);
  medio.attach(pinMedio);
  anular.attach(pinAnular);
  pulgarFlex.attach(pinPulgarFlex);
  pulgarGiro.attach(pinPulgarGiro);

  // Posiciones iniciales suaves
  indice.write(0);
  medio.write(0);
  anular.write(0);
  pulgarFlex.write(0);
  pulgarGiro.write(0);

  delay(300);
}

void loop() {
  if (Serial.available()) {
    String data = Serial.readStringUntil('\n');  // Recibe: a,b,c,d,e

    int vals[5] = {0, 0, 0, 0, 0};
    int index = 0;
    String temp = "";

    for (int i = 0; i < data.length(); i++) {
      char c = data[i];

      if (c == ',') {
        vals[index] = temp.toInt();
        temp = "";
        index++;
      } else {
        temp += c;
      }
    }

    // Último valor
    if (index < 5) vals[index] = temp.toInt();

    // Control servos
    indice.write(vals[0]);
    medio.write(vals[1]);
    anular
